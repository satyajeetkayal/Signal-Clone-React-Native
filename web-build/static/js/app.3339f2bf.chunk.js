(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{241:function(e,t,a){"use strict";a.d(t,"a",(function(){return G}));a(330);var n=a(62),r=a(0),o=a.n(r),i=a(2),c=a(179),l=a(348),s=a(17),u=a.n(s),m=a(84),d=a(3),f=a(29),p=a(75),h=(a(318),a(319),(0===p.apps.length?p.initializeApp({apiKey:"AIzaSyBmpIwJ1lGS_i-WTrjzEePSf7fUqtnBMk0",authDomain:"signal-clone-app-d7eef.firebaseapp.com",projectId:"signal-clone-app-d7eef",storageBucket:"signal-clone-app-d7eef.appspot.com",messagingSenderId:"266920374782",appId:"1:266920374782:web:880242f541500eaf45d0af"}):p.app()).firestore()),g=p.auth(),E=function(e){var t=e.navigation,a=Object(r.useState)(""),i=u()(a,2),c=i[0],l=i[1],s=Object(r.useState)(""),p=u()(s,2),h=p[0],E=p[1];Object(r.useEffect)((function(){return g.onAuthStateChanged((function(e){console.log(e),e&&t.replace("Home")}))}),[]);var y=function(){g.signInWithEmailAndPassword(c,h).catch((function(e){return alert(e)}))};return o.a.createElement(m.a,{behavior:"padding",style:b.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(f.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),o.a.createElement(d.a,{style:b.inputContainer},o.a.createElement(f.d,{placeholder:"Email",autoFocus:!0,type:"email",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(f.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:h,onChangeText:function(e){return E(e)},onSubmitEditing:y})),o.a.createElement(f.b,{containerStyle:b.button,onPress:y,title:"Login"}),o.a.createElement(f.b,{containerStyle:b.button,onPress:function(){return t.navigate("Register")},type:"outline",title:"Register"}))},b=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),y=a(16),v=a.n(y),w=a(232),C=a(144),S=a(63),x=function(e){var t=e.navigation,a=Object(r.useState)(""),i=u()(a,2),c=i[0],l=i[1],s=Object(r.useState)(""),p=u()(s,2),h=p[0],E=p[1],b=Object(r.useState)(""),y=u()(b,2),x=y[0],O=y[1],T=Object(r.useState)(),j=u()(T,2),L=j[0],R=j[1],P=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"===Platform.OS){t.next=6;break}return t.next=3,v.a.awrap(C.b());case 3:e=t.sent,"granted"!==e.status&&alert("We need permission to access your camera ");case 6:I();case 7:case"end":return t.stop()}}),null,null,null,Promise)},I=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.awrap(C.a({mediaTypes:S.a.All,allowsEditing:!0,aspect:[1,1],quality:.5}));case 3:(e=t.sent).cancelled||R(e.uri),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error @pickImage:",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]],Promise)},z=function(){g.createUserWithEmailAndPassword(h,x).then((function(e){e.user.updateProfile({displayName:c,photoURL:L||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return Object(r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Login"})}),[t]),o.a.createElement(m.a,{behavior:"padding",style:k.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(f.f,{h3:!0,style:{marginBottom:50}},"Create a Signal Account"),o.a.createElement(d.a,{style:k.profileImage},L?o.a.createElement(f.c,{source:{uri:L},style:{width:100,height:100},onPress:P}):o.a.createElement(w.a,{name:"plus",size:24,color:"#FFFF",onPress:P})),o.a.createElement(d.a,{style:k.inputContainer},o.a.createElement(f.d,{placeholder:"Full Name",autoFocus:!0,type:"text",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(f.d,{placeholder:"Email",value:h,onChangeText:function(e){return E(e)}}),o.a.createElement(f.d,{placeholder:"Password",secureTextEntry:!0,value:x,onChangeText:function(e){return O(e)},onSubmitEditing:z})),o.a.createElement(f.b,{containerStyle:k.button,raised:!0,title:"Register",onPress:z}))},k=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10},profileImage:{backgroundColor:"#2c6bed",borderRadius:40,height:80,width:80,marginTop:-20,marginBottom:10,overflow:"hidden",alignSelf:"center",alignItems:"center",justifyContent:"center"}}),O=a(49),T=function(e){var t,a,n,i=e.id,c=e.chatName,l=e.enterChat,s=Object(r.useState)([]),m=u()(s,2),d=m[0],p=m[1];return Object(r.useEffect)((function(){return h.collection("chats").doc(i).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return p(e.docs.map((function(e){return e.data()})))}))})),o.a.createElement(f.e,{key:i,onPress:function(){return l(i,c)},key:i,bottomDivider:!0},o.a.createElement(f.a,{rounded:!0,source:{uri:(null==d||null==(t=d[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(f.e.Content,null,o.a.createElement(f.e.Title,{style:{fontWeight:"800"}},c),o.a.createElement(f.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==d||null==(a=d[0])?void 0:a.displayName,":",null==d||null==(n=d[0])?void 0:n.message)))},j=(i.a.create({}),a(21)),L=a(227),R=function(e){var t=e.navigation,a=Object(r.useState)([]),i=u()(a,2),c=i[0],l=i[1],s=function(){g.signOut().then((function(){t.replace("Login")}))};Object(r.useEffect)((function(){return h.collection("chats").onSnapshot((function(e){l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerTitleAlign:"left",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintStyle:"black",headerLeft:function(){var e;return o.a.createElement(d.a,{style:{marginLeft:15}},o.a.createElement(j.a,{onPress:s,activeOpacity:.5},o.a.createElement(f.a,{rounded:!0,source:{uri:null==g||null==(e=g.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(j.a,{activeOpacity:.5},o.a.createElement(w.a,{name:"camerao",size:24,color:"black"})),o.a.createElement(j.a,{activeOpacity:.5},o.a.createElement(L.a,{onPress:function(){return t.navigate("AddChat")},name:"pencil",size:24,color:"black"})))}})}),[t]);var m=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return o.a.createElement(d.a,null,o.a.createElement(n.a,{style:"black"}),o.a.createElement(O.a,{style:P.container},c.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(T,{key:t,id:t,chatName:a,enterChat:m})}))))},P=i.a.create({container:{height:"100%"}}),I=a(138),z=function(e){var t=e.navigation,a=Object(r.useState)(""),n=u()(a,2),i=n[0],c=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(h.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return o.a.createElement(d.a,{style:B.container},o.a.createElement(f.d,{placeholder:"Enter a chat name",value:i,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:o.a.createElement(I.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),o.a.createElement(f.b,{disabled:!i,onPress:l,title:"Create new chat"}))},B=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),N=a(69),U=a(51),A=a(25),F=a(8),W=a(60),D=a(222),J=a(213),M=function(e){var t=e.navigation,a=e.route,i=Object(r.useState)(""),c=u()(i,2),l=c[0],s=c[1],E=Object(r.useState)([]),b=u()(E,2),y=b[0],v=b[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return o.a.createElement(d.a,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(f.a,{rounded:!0,source:{uri:null==(e=y[0])?void 0:e.data.photoURL}}),o.a.createElement(A.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return o.a.createElement(j.a,{style:{marginLeft:10},onPress:t.goBack},o.a.createElement(w.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return o.a.createElement(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(j.a,null,o.a.createElement(D.a,{name:"video-camera",size:24,color:"white"})),o.a.createElement(j.a,null,o.a.createElement(D.a,{name:"phone",size:24,color:"white"})))}}),k()}),[t,y]);var C=function(){W.a.dismiss(),h.collection("chats").doc(a.params.id).collection("messages").add({timestamp:p.firestore.FieldValue.serverTimestamp(),message:l,displayName:g.currentUser.displayName,email:g.currentUser.email,photoURL:g.currentUser.photoURL}),s(""),k()},S=function(){setTimeout((function(){k()}),35)};Object(r.useLayoutEffect)((function(){var e=h.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return S(),e}),[a]);var x=Object(r.useRef)(),k=function(){x.current.scrollToEnd()};return o.a.createElement(d.a,{style:{flex:1,backgroundColor:"white"}},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.a,{behavior:"ios"===F.a.OS?"padding":"height",style:V.container,keyboardVerticalOffset:90},o.a.createElement(N.a,{onPress:W.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{ref:x,contentContainerStyle:{paddingTop:15}},y.map((function(e){var t=e.id,a=e.data;return a.email===g.currentUser.email?o.a.createElement(d.a,{key:t,style:V.reciever},o.a.createElement(f.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(A.a,{style:V.recieverText},a.message)):o.a.createElement(d.a,{key:t,style:V.sender},o.a.createElement(f.a,{rounded:!0,position:"absolute",containerStyle:{position:"absolute",bottom:-15,left:-5},bottom:-15,left:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(A.a,{style:V.senderText},a.message),o.a.createElement(A.a,{style:V.senderName},a.displayName))}))),o.a.createElement(d.a,{style:V.footer},o.a.createElement(U.a,{value:l,onChangeText:function(e){return s(e)},onSubmitEditing:C,onFocus:S,placeholder:"Signal Message",style:V.textInput}),o.a.createElement(j.a,{disabled:!l,onPress:C,activeOpacity:.5},o.a.createElement(J.a,{name:"send",size:24,color:"#2B68E6"})))))))},V=i.a.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},recieverText:{color:"black",fontWeight:"500",marginLeft:10},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"}}),q=Object(l.a)(),H={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white",headerTitleAlign:"center"};function G(){return o.a.createElement(c.a,null,o.a.createElement(q.Navigator,{screenOptions:H},o.a.createElement(q.Screen,{name:"Login",component:E}),o.a.createElement(q.Screen,{name:"Register",component:x}),o.a.createElement(q.Screen,{name:"Home",component:R}),o.a.createElement(q.Screen,{name:"AddChat",component:z}),o.a.createElement(q.Screen,{name:"Chat",component:M})))}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},251:function(e,t,a){e.exports=a(331)}},[[251,1,2]]]);
//# sourceMappingURL=app.3339f2bf.chunk.js.map